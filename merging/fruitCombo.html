<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="style1.css" />
  </head>
  <body>
    <header>
      <p>Delivering in Mumbai and Delhi | Same day delivery!</p>
    </header>
    <nav>
      <div class="navbar">
        <div class="box1">
          <ul>
            <li>
              shop
              <div class="sub-menu">
                <ul>
                  <a href="allFruits.html"><li>ALL FRUITS</li></a>
                  <a href="freshCut.html"><li>FRESH CUTS</li></a>
                  <a href="fruitCombo.html"><li>FRUIT COMBOS</li></a>
                  <a href="gift_by_kimaye.html"><li>GIFT BY KIMAYE</li></a>
                  <a href="grapes.html"><li>GRAPES FAMILY BY KIMAYE</li></a>
                  <li>RETURN AND REPLACEMENT</li>
                  <a href="communityPage.html"><li>COMMUNITY BUYING</li></a>
                </ul>
              </div>
            </li>
            <li>
              learn
              <div class="sub-menu">
                <ul>
                  <a href="our_story.html"><li>OUR STORY</li></a>
                  <li>WHY KIMAYE</li>
                  <a href="traceability.html"><li>TRACEABILITY</li></a>
                  <a href="Beyond_fruits.html"><li>BEYOND FRUITS</li></a>
                </ul>
              </div>
            </li>
            <a href="grow.html"><li>GROW</li></a>
          </ul>
        </div>
        <div class="box2">
          <img
            src="https://cdn.shopify.com/s/files/1/0449/5225/6667/files/website-logo_400x@2x.png?v=1596288204"
            alt=""
          />
        </div>
        <div class="box3">
          <div><a href=""></a><i class="fa-solid fa-location-dot"></i></div>
          <div><a href=""></a><i class="fa-solid fa-magnifying-glass"></i></div>
          <div><a href=""></a><i class="fa-solid fa-user"></i></div>
          <div>
            <a id="cart"><i class="fa-solid fa-cart-arrow-down"></i></a>
          </div>
          <div id="cart_count">
            <p></p>
          </div>
        </div>
      </div>
    </nav>

    <!-- section bar -->
    <section>
      <div><p class="hover-underline-animation"><a href="allFruits.html">ALL FRUITS</a> </p></div>
      <div><p class="hover-underline-animation"><a href="freshCut.html">FRESH CUTS</a> </p></div>
      <div><p class="hover-underline-animation"><a href="fruitCombo.html">FRUIT COMBOS</a></p></div>
      <div><p class="hover-underline-animation"> <a href="gift_by_kimaye.html"> GIFTS BY KIMAYE</a></p></div>
    </section>
    <!-- section ended -->
    <div class="navigator">
      <div>
        <p><a href="index.html" class="fa-solid fa-house"></a> Home/ fruit combos</p>
      </div>
      <div>
        <p>showing 9 results</p>
      </div>
    </div>

    <main>
      <div id="container">
        <!-- add all the items  -->
      </div>
    </main>
    <!-- section bar -->
    <section>
      <div><p class="hover-underline-animation"><a href="allFruits.html">ALL FRUITS</a> </p></div>
      <div><p class="hover-underline-animation"><a href="freshCut.html">FRESH CUTS</a> </p></div>
      <div><p class="hover-underline-animation"><a href="fruitCombo.html">FRUIT COMBOS</a></p></div>
      <div><p class="hover-underline-animation"> <a href="gift_by_kimaye.html"> GIFTS BY KIMAYE</a></p></div>
    </section>
    <!-- section ended -->

    <!-- footer -->
    <footer>
      <div>
        <div class="box">
          <p>FAQ'S</p>
          <p>Contact Us</p>
          <p>shipping & return policy</p>
          <p>terms and condition</p>
          <p>privacy policy</p>
        </div>

        <div id="box2">
          <div>
            <h3>Follow us on</h3>
            <div class="social_icon">
              <img
                src="https://cdn.shopify.com/s/files/1/0449/5225/6667/files/fb-icon.png?v=1599571756"
                alt="facebook"
              />
              <img
                src="https://cdn.shopify.com/s/files/1/0449/5225/6667/files/insta-icon.png?v=1599571756"
                alt="instagram"
              />
              <img
                src="https://cdn.shopify.com/s/files/1/0449/5225/6667/files/twitter-icon.png?v=1599571756"
                alt="twitter"
              />
            </div>
          </div>
        </div>
      </div>
    </footer>
    <div class="copyright">
      <p>copyright2020 All rights reserved</p>
      <img
        src="https://cdn.shopify.com/s/files/1/0449/5225/6667/files/ting.png?v=1599565040"
        alt=""
      />
    </div>
    <!-- footer ended -->


    <!-- side toggle bar add to cart  -->
    <div class="side-bar">
      <div>
        <p>shopping cart</p>
        <button id="close">CLOSE X</button>
      </div>
      <div class="item">
        <table>
          <thead>
            <tr>
              <th>product</th>
              <th>quantity</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="container">
        <div class="skills">
          <div class="progress-bar">
            <div class="html"><span>86%</span></div>
          </div>
          <div class="free_shipping">
            <p></p>
            <br />
          </div>
          <p id="tax">No tax on fresh fruits. Free shipping above Rs. 350.</p>
        </div>
      </div>
      <div class="subtotal">
        <p>subtotal in rupees(₹):</p>
        <p>0</p>
      </div>
      <div class="btn_checkout">
        <button>check out</button> <br />
        <button>continue shopping</button>
      </div>
    </div>
  </body>
</html>

<!-- script for fruit combo page -->

<script>
  let container = document.querySelector("#container");
  let fruit_combos = [
    {
      img: "https://cdn.shopify.com/s/files/1/0449/5225/6667/products/litchi--_-keasr_540x.jpg?v=1654850892",
      product: "Kimaye Litchi-Kesar Combo",
      price: "₹332",
    },
    {
      img: "https://cdn.shopify.com/s/files/1/0449/5225/6667/products/Cherry--_-blueberry_540x.jpg?v=16548510192",
      product: "Kimaye Cherry- Blueberry Combo",
      price: "₹564",
    },
    {
      img: "https://cdn.shopify.com/s/files/1/0449/5225/6667/products/peach--_-litchi_540x.jpg?v=1654850921",
      product: "Kimaye Litchi -Peach Combo",
      price: "₹184",
    },
    {
      img: "https://cdn.shopify.com/s/files/1/0449/5225/6667/products/peach--_-Plum_540x.jpg?v=1654851067",
      product: "Kimaye Plum-Peach Combo",
      price: "₹97",
    },
    {
      img: "https://cdn.shopify.com/s/files/1/0449/5225/6667/products/Plum_BB_540x.jpg?v=1621068661",
      product: "Kimaye Plum-Blueberries Combo",
      price: "₹514",
    },
    {
      img: "https://cdn.shopify.com/s/files/1/0449/5225/6667/products/Kesar_BB_540x.jpg?v=1623393336",
      product: "Kimaye Kesar- Blueberries Combo",
      price: "₹659",
    },
    {
      img: "https://cdn.shopify.com/s/files/1/0449/5225/6667/products/MangoBlueberry_1_540x.png?v=1618035441",
      product: "Kimaye Alphonso-Blueberries Combo",
      price: "₹653",
    },
    {
      img: "https://cdn.shopify.com/s/files/1/0449/5225/6667/products/litchi--_-keasr_540x.jpg?v=1654850892",
      product: "Kimaye Litchi-Kesar Combo",
      price: "₹332",
    },
    {
      img: "https://cdn.shopify.com/s/files/1/0449/5225/6667/products/KiwiBlueberry_540x.png?v=1617983685",
      product: "Kimaye Kiwi-Blueberries Combo",
      price: "₹593",
    },
  ];

  let cartArr = JSON.parse(localStorage.getItem("cartArr")) || [];
  fruit_combos.forEach(function (elem) {
    let card = document.createElement("div");

    let img_div = document.createElement("div");
    img_div.setAttribute("class", "img_container");
    card.append(img_div);

    let producImg = document.createElement("img");
    producImg.setAttribute("src", elem.img);
    img_div.append(producImg);
    let addCartBtn = document.createElement("button");
    addCartBtn.addEventListener("click", function () {
      cartFun(elem);
    });
    addCartBtn.innerText = "add to cart";
    img_div.append(addCartBtn);

    let prodName = document.createElement("p");
    prodName.innerText = elem.product;
    prodName.style.textAlign = "center";
    prodName.style.backgroundColor = "transparent";
    card.append(prodName);

    let price1 = document.createElement("h3");
    price1.innerText = elem.price;
    price1.style.textAlign = "center";
    price1.style.color = "red";

    price1.style.backgroundColor = "transparent";
    card.append(price1);

    document.querySelector("#container").append(card);
  });

  function cartFun(elem) {
    cartArr.push(elem);
    localStorage.setItem("cartArr", JSON.stringify(cartArr));
    window.location.reload();
  }

  document.querySelector("#cart").addEventListener("click", openMenu);
  document.querySelector("#close").addEventListener("click", closeMenu);

  function openMenu() {
    let sideMenu = document.querySelector(".side-bar");
    sideMenu.style.display = "block";
    let main = document.querySelector("main");
    main.style.opacity = "0.2";
  }
  function closeMenu() {
    let sideMenu = document.querySelector(".side-bar");
    sideMenu.style.display = "none";
    let main = document.querySelector("main");
    main.style.opacity = "1";
    window.location.reload();
  }
</script>


<!-- script for add to cart page funtionality-->

<script>
  // let cartArr = JSON.parse(localStorage.getItem("cartArr")) || [];
  // // console.log(cartArr)
  let tbody = document.querySelector("tbody");

  let totalQuantity = 0;
  let totalPrice = 0;
  let sPrice = 0;
  displayCart(cartArr);

  function displayCart(cartArr) {
    cartArr.forEach(function (item, index) {
      let x = item.price;
      x = x.split("₹");
      x = x.splice(1, 1).map(Number);
      x = x.join();

      let tr = document.createElement("tr");
      let td1 = document.createElement("td");
      let img = document.createElement("img");
      img.setAttribute("src", item.img);
      img.setAttribute("id", "imgProduct");
      td1.append(img);
      tr.append(td1);

      td2 = document.createElement("td");
      let name = document.createElement("p");
      name.innerText = item.product;
      let price = document.createElement("small");
      price.innerText = item.price;
      let br = document.createElement("br");

      // dec button
      let decBtn = document.createElement("button");
      decBtn.innerText = "-";
      decBtn.setAttribute("id", "btnDec");
      decBtn.addEventListener("click", decrease);

      // dec function
      function decrease(item) {
        if (qty > 1) {
          qty--;
          quantity.innerText = qty;
          sPrice = +x;
          let total = x * qty;
          td4.innerText = total;
          decreaseDisplayTotalPrice(sPrice);
        }
      }
      // quantity
      let quantity = document.createElement("small");
      let qty = 1;
      quantity.setAttribute("id", "qty");
      quantity.innerText = +qty;

      //   inc button

      let incBtn = document.createElement("button");
      incBtn.innerText = "+";
      incBtn.setAttribute("id", "btnInc");
      incBtn.addEventListener("click", function () {
        increase();
      });

      //   inc function

      function increase() {
        qty++;
        if (qty >= 1) {
          quantity.innerText = qty;
          totalQuantity += 1;
          sPrice = +x;
          total = x * qty;
          td4.innerText = total;
          increaseDisplayTotalPrice(sPrice);
        }
      }
      //   delete button
      td3 = document.createElement("button");
      td3.innerText = "DELETE";
      td3.addEventListener("click", function (event) {
        event.target.parentNode.remove();
        delete_item(index);
        deletesubtotal(total);
      });

      //   total single
      let td4 = document.createElement("td");
      let total = x * qty;
      totalPrice += total;
      td4.innerText = total;

      td2.append(name, price, br, decBtn, quantity, incBtn);
      tr.append(td2);
      tr.append(td3, td4);
      tbody.append(tr);
    });
  }

  // delete subtotal from html
  function deletesubtotal(total) {
    let totalText = document.querySelector(".subtotal>p+p");
    oldprice = totalText.innerText;
    totalText.innerText = +oldprice - total;
    percentage();
  }

  //   total price
  function displayTotalPrice() {
    let totalText = document.querySelector(".subtotal>p+p");
    totalText.innerText = totalPrice;
    percentage();
  }
  displayTotalPrice();


  // total after decrease
  function decreaseDisplayTotalPrice(sPrice) {
    let totalText = document.querySelector(".subtotal>p+p");
    let oldprice = totalText.innerText;
    totalText.innerText = +oldprice - sPrice;
    percentage();
  }


  // total  after increase
  function increaseDisplayTotalPrice(sPrice) {
    let totalText = document.querySelector(".subtotal>p+p");
    let oldprice = totalText.innerText;
    totalText.innerText = +oldprice + sPrice;
    percentage();
  }

  //   delete function
  function delete_item(index) {
    cartArr.splice(index, 1);

    localStorage.setItem("cartArr", JSON.stringify(cartArr));
  }


  // function showing percentage value
    function percentage() {
    let totalText = document.querySelector(".subtotal>p+p").innerText;
    let percent = Math.floor((+totalText * 100) / 350);

    console.log(percent);
    if (percent > 100) {
      let percentDiv = document.querySelector(".html>span");
      percentDiv.innerText = "100%";
      let progress_bar = document.querySelector(".progress-bar>div");
      progress_bar.style.width = "100%";
      let shippingText = document.querySelector(".free_shipping");
      shippingText.style.display = "block";
      shippingText.innerText = "CONGRATULATIONS! YOU'VE GOT FREE SHIPPING!";
      shippingText.style.backgroundColor = "green";
    } else {
      let percentDiv = document.querySelector(".html>span");
      percentDiv.innerText = `${percent}${"%"}`;
      let progress_bar = document.querySelector(".progress-bar>div");
      progress_bar.style.width = `${percent}%`;
      let shippingText = document.querySelector(".free_shipping");
      shippingText.innerText = `${"Spend ₹"} ${
        350 - +totalText
      } ${"more to reach FREE SHIPPING!"}`;
      shippingText.style.backgroundColor = "red";
    }


    //  showing cart count
    function show_cart_count(cartArr) {
      let cart_count = document.querySelector("#cart_count>p");
      if (cartArr.length == 0) {
        cart_count.innerText = "";
      } else {
        cart_count.innerText = `${"("}${cartArr.length}${")"}`;
      }
    }
    show_cart_count(cartArr);
  }
</script>